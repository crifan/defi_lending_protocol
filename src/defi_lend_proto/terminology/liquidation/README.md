# 清算Liquidation

* 清算=liquidation = clearing
  * 动词 
    * liquidated=被清算 
  * 逻辑 
    * 如果抵押资产价格下跌或者借贷资产价格上涨，导致欠的钱超过了贷款额度，就会触发清算 
  * 相关概念 
    * AAVE 
      * 清算阈值=liquidation threshold=L(Q) 
        * 平均清算阈值=average liquidation threshold= L (a) (Q)
          * 多个资金池的总体平均清算阈值 
            * 是底层质押资产的清算阈值的加权平均 
              * weighted average of the liquidation thresholds of the collateral’s underlying assets 
          * 是动态计算的 
      * 清算奖励=liquidation bonus 
        * 详见：清算奖励
      * 清算人=liquidator 
        * 详见：清算人Liquidator
  * 举例 
    * 假设用户存入1000 USDC，按美元计价是$1000，USDC的抵押系数（Collateral Factor）为75%，也就是说抵押1000 USDC，最多能贷出来价值$750（贷款额度，Borrowing Capacity）的其他资产，比如750 DAI （DAI也属于瞄定美元的稳定货币一族），或者3 ETH（假设当时ETH价格为$250） 
    * 在去中心化金融里，代码即法律，由于过度抵押式借贷模型设计（Over-collateralized），部分抵押资产会被清算来偿还超出贷款额度部分的高风险债务，从而再次把债务总额降到贷款额度之下 
    * 继续之前的例子，1000 USDC 贷出3 ETH，贷出时价格为$250; 如果ETH价格上升到$300，负债率达到3 * 300 / 1000 = 90%。按新的价格清算掉2 ETH对应的USDC数量 2 * $300 = $600 = 600 USDC，清算后的负债率为 1 * $300 / (1000 * 600) = 75% ，违约风险被消解 
      * 注：如果只清算掉1 ETH，则：借贷了2 ETCH 
        * 负债率= 2 * ETH  / (1000 * 清算掉的1ETH) = 2 * 300 / (1000 * 300) = 600/700 = 85.7% 
          * 还是大于75%，还是有风险，还要继续清算 
    * 注意 
      * 这里我对清算过程作了简单化处理方便读者理解，实际智能合约执行中逻辑更复杂 
  * 清算结果 
    * 如果发生清算事件，最多可以清算50%的贷款，这将使健康因子恢复1以上 
  * 相关风险 
    * 对借款人 
      * 被清算的风险在于损失抵押品，拍卖时可能会有的滑价以及清算罚金。 
    * 对协议方 
      * 清算的风险在于流动性不足，市场上没有足以消化抵押品的流动性时，清算人无法完全执行完毕，会留下坏帐。 
    * -》相关风险缓解措施 
      * 为了解决清算时可能会发生的流动性与坏帐问题，有些借贷协议也设计出不同的机制 
      * 例如 
        * 风险基金的设置 
        * 用自家储备代币实时清算 
          * 避免市场流动性不足等 
